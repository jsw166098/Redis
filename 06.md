# 복구 시점 비교

RDB 복구 방식은 RDB 파일에 기록된 키-값 로그 레코드를 하나씩 읽어 데이터셋이 저장되는 공간에 바로 복구를 진행한다.
AOF 복구 방식은 AOF 파일로부터 로그 레코드를 한 명령어씩 차례대로 읽고 수행하여, 서버가 종료된 시점가지의 데이터셋을 복구한다. 

## Redis의 Dict 구조
> Redis에서 데이터를 관리하는 구조
* Redis에서 저장된 데이터를 관리하는 구조
* Redis의 자료구조 중 메모리 시용량이 가장 적은 **hash 구조를 기본 구조**로 사용한다.
* 요청된 키와 값에 대한 데이터를 **하나의 엔트리**로 묶어서 저장한다.

### dictEntry
* `키`에 대한 **포인터** -> 키는 문자열 형태이다.
* `값`에 대한 **Redis 객체 포인터** -> Redis 객체는 요청된 값 뿐만아니라 데이터 타입, 참조 횟수, 시간, 값에 대한 포인터를 가진다.
* `다음 엔트리`를 가리키는 **엔트리 포인터**

#### Redis 클라이언트 프로그램에서 Redis 서버로 키-값 쌍의 데이터 적재 요청!!
* 요청된 파라미터에 대해 오류 검사 및 타입 분석 수행
* 이상이 없다면 키에 대한 문자열의 hash 값을 계산하여 dict의 위치를 결정한다.
~~~
dict에 저장하고자 하는 키를 가진 엔트리가 없는 경우!!
-> 요청된 키, 값을 새로운 엔트리로 만들어 dict에 저장한다. 

dict에 저장하고자 하는 키를 가진 엔트리가 존재하는 경우!!
-> 별도의 엔터리를 할당하지 않고 해당 엔트리의 값만 요청된 값으로 변경한다.

dict에 저장하고자 하는 키를 가진 엔트리가 존재하지만 값이 다른 경우!!
-> 기존에 저장된 엔트리의 다음 포인터가 새로 생성된 엔트리를 포인팅하여 요청한 데이터를 저장한다. 

~~~