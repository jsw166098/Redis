# 캐시

## WEB-WAS-DB

서비스를 운영할 때 취하는 전형적인 3티어 구조이다. 사용자가 적을 경우 3티어 구조로 충분히 가능하다.

* web server : 웹브라우저로부터 요청을 받아 정적인 컨텐츠(html, css)를 처리하는 시스템
* was(web application server): DB 조회나 다양한 로직을 처리하는 동적인 컨텐츠를 처리하는 시스템
* DB: 데이터를 저장하는 저장소

## 캐시
한 번 읽어온 데이터를 임의의 공간에 저장하여 다음에 읽을 때는 빠르게 결과값을 받을 수 있도록 도와주는 공간

### 캐시를 사용하는 구조
클라이언트가 웹 서버에 요청을 보내면 웹서버는 데이터를 DB에서 가저오기 전에 cache 서버에 데이터가 있는지 확인한다. 
cache 서버에 데이터가 있는 경우, 없는 경우에 대한 구조를 다음과 같이 2가지로 나눈다.

* cache hit: 캐시 서버에 요청한 데이터가 존재하여 db에 요청하지 않고 바로 클라이언트에 데이터를 반환한다.
* cache miss: 캐시 서버에 요청한 데이터가 존재하지 않아 db에 해당 데이터를 요청한다. db는 요청한 데이터를 반환하고 웹 서버는 반환된 데이터를 다음 사용을 위해 캐시에 저장한 후 클라이언트에 반환한다. 

~~~
client --> web server ---> cache
		   ---> DB
~~~

### 캐시를 하는 이유

사용자가 많아지면 DB에 부하될 요청이 많아질 것이다. DB의 경우 매 transaction 마다 디스크에 접근해야 하기 때문에 부하가 많아지면 상당히 느려진다.
따라서 같은 요청이 여러번 들어올 경우 캐시 서버를 이용하여 바로 결과값을 반환하면 DB의 부화를 줄일 수 있다.

---

## 용어

부하
* 실행 중인 프로세스의 양과 대기 중인 프로세스의 양을 모두 합친 전체 프로세스의 양
* 주어진 일의 양

이용률
* 전체 프로세서의 양에 대한 실행 중인 프로세스의 양을 비율로 환산한 값
* 한 번에 처리할 수 있는 일의 양

---
## 출처

[Redis 기본 정리](https://brunch.co.kr/@jehovah/20)
